<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../YTSync-control/YTSync-control.html">
<link rel="import" href="../YTSync-control-general/YTSync-control-general.html">
<dom-module id="ytsync-control-menu">
    <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <ytsync-control-general id="control-general" sources-players="[[sourcesPlayers]]"></ytsync-control-general>
    <ytsync-control id="control"></ytsync-control>

  </template>

    <script>
        Polymer({
            is: 'ytsync-control-menu',
            properties: {
                sourcesPlayers: {
                    type: Object,
                    readOnly: false,
                    notify: false,
                }
            },
            parseUrl: function(url) {
                var regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;
                var match = url.match(regExp);
                return (match&&match[7].length==11)? match[7] : false;
            }
            addPlayer: function() {
                var player = this.sourcesPlayers.addPlayer();
                if(!player) {
                    return "Maximo alacanzado";
                }
                var control = document.createElement("ytsync-control");
                control.sources = this.sourcesPlayers;
                control.playerId = player;
                Polymer.dom(this.root).appendChild(control);
            }
        });
    </script>
</dom-module>
