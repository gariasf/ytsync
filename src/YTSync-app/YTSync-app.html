<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../YTSync-sources/YTSync-sources.html">
<link rel="import" href="../YTSync-control-menu/YTSync-control-menu.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<style is="custom-style" include="iron-flex iron-flex-alignment"></style>
<dom-module id="ytsync-app">
    <template>
    <style>
    :host {
        display: block;
        flex: 1;
    }
    paper-toolbar {
        padding: 0 45px 0 45px;
        background-color: #252525;
        box-shadow: 0 2px 5px rgba(0,0,0,0.12), 0 2px 5px rgba(0,0,0,0.24);
        margin-bottom: 25px;
    }
    paper-button {
            padding: 0.45em 0.57em;
    }    
    #main_container {
        position: relative;
        display: flex;
        flex-direction: row-reverse;
        align-items: flex-start;
        justify-content: space-around;
        width: 100vw;
    }
    #yt-app-action {
        width: 100%;
        max-width: 1000px;
        height: auto;
        position: relative;
        display: flex;
        flex-direction: row-reverse;
        justify-content: space-between;
        background-color: #fff;
        box-shadow: 0 2px 5px rgba(0,0,0,0.12), 0 2px 5px rgba(0,0,0,0.24);
    }
    #controls {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: #e6e6e6;
    }
    #addButton {
        background-color: #404040;
    }
    .title {margin-left: 65px!important;}
    </style>
        <paper-toolbar>
             <div class="title">YoutuSync</div>
            <ytsync-control-menu id="control-menu"></ytsync-control-menu>
            <paper-button raised on-tap="addPlayer" id="addButton"><iron-icon icon="icons:add"></iron-icon>&nbsp;Add Video</paper-button>
        </paper-toolbar>
        <div id="main_container">
            <div id="yt-app-action">
                <ytsync-sources id="sources" class="layout horizontal wrap"></ytsync-sources>
                <div id="controls">
                    
                </div>
            </div>
        </div>
        
    </template>

    <script>
        Polymer({
            is: 'ytsync-app',
            attached: function() {
                this.$$("#control-menu").sourcesPlayers = this.$$("#sources");
                this.$$("#control-menu").controlsWrapper = this.$$("#controls");
            },
            addPlayer: function() {
                var player = this.$$("#sources").addPlayer();
                if(player === false) {
                    return;
                }
                var control = document.createElement("ytsync-control");
                control.sources = this.$$("#sources");
                control.playerId = player;
                Polymer.dom(this.$$("#controls")).appendChild(control);
            }
        });
    </script>
</dom-module>
