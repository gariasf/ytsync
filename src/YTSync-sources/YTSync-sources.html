<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/google-youtube/google-youtube.html">
<dom-module id="ytsync-sources">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
  </template>

  <script>
    Polymer({
      is: 'ytsync-sources',
      properties: {
        players: {
          type: Object,
          value: {},
          readOnly: true,
          notify: true,
        },
        lastId: {
          type: Number,
          value: 0,
          readOnly: true,
          notify: false,
        }
      },
      play: function() {
        for(i = Object.keys(this.players).length - 1; i >= 0; i--) {
            if(this.players[i]){
                this.players[i].play();
            }
        }
      },
      pause: function() {
       for(i = Object.keys(this.players).length - 1; i >= 0; i--) {
            if(this.players[i]){
                this.players[i].pause();
            }
        }
      },
      addPlayer: function() {
        if(Object.keys(this.players).length <= 5) {
            var player = document.createElement("google-youtube");
            Polymer.dom(this.root).appendChild(player);
            player.id = "playerdId" + this.lastId;
            player.intId = this.lastId;
            this._setLastId(this.lastId + 1);
            this.players[player.intId] = player;
            return player.intId;
        }else {
            return false;
        }
      },
      delPlayer: function(id) {
        this.players[id].remove();
        delete this.players[id];
      }
    });
  </script>
</dom-module>
